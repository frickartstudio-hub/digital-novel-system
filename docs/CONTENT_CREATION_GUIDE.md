# デジタルノベルシステム コンテンツ作成マニュアル

**著者**: Manus AI  
**バージョン**: 1.0  
**最終更新日**: 2025年11月6日

本マニュアルは、デジタルノベルシステムを使用してコンテンツを制作するシナリオライター、クリエイター、プロデューサーを対象としています。シナリオデータの作成方法、メディアファイルの準備、効果的な演出手法について詳しく解説します。

---

## 目次

1. [はじめに](#はじめに)
2. [シナリオデータの構造](#シナリオデータの構造)
3. [メディアファイルの準備](#メディアファイルの準備)
4. [シーンの作成](#シーンの作成)
5. [字幕の設定](#字幕の設定)
6. [音声の配置](#音声の配置)
7. [トランジション効果](#トランジション効果)
8. [ベストプラクティス](#ベストプラクティス)
9. [トラブルシューティング](#トラブルシューティング)

---

## はじめに

デジタルノベルシステムは、画像や動画を背景として表示しながら、音声とそれに同期した字幕を組み合わせて物語を進行させるWebアプリケーションです。従来のアドベンチャーゲームとは異なり、映像作品のような没入感のある体験を提供します。

### システムの特徴

本システムは、**JSON形式のシナリオファイル**を読み込んで動作します。このファイルには、各シーンの画像や動画、音声、字幕、トランジション効果などの情報が記述されています。シナリオライターは、プログラミングの知識がなくても、JSONファイルを編集するだけでコンテンツを作成できます。

### 必要なスキル

コンテンツ制作には以下のスキルが推奨されます。

| スキル | 必須度 | 説明 |
|--------|--------|------|
| JSON編集 | 必須 | シナリオデータの記述に使用 |
| 画像編集 | 推奨 | 背景画像の作成・調整 |
| 音声編集 | 推奨 | BGM、ボイス、効果音の編集 |
| 動画編集 | 任意 | 動画シーンを使用する場合 |

---

## シナリオデータの構造

シナリオデータは、`scenario.json`という名前のJSONファイルとして作成します。このファイルは、作品全体のメタデータと、複数のシーンで構成されます。

### 基本構造

シナリオファイルの基本構造は以下の通りです。

```json
{
  "title": "作品タイトル",
  "author": "作者名",
  "version": "1.0",
  "description": "作品の説明文",
  "scenes": [
    // シーンの配列
  ],
  "metadata": {
    "totalScenes": 10,
    "estimatedDuration": 60000,
    "tags": ["ジャンル1", "ジャンル2"],
    "rating": "全年齢"
  }
}
```

### メタデータフィールド

作品全体の情報を記述するメタデータフィールドについて説明します。

| フィールド | 型 | 必須 | 説明 |
|------------|-----|------|------|
| `title` | string | ✓ | 作品のタイトル |
| `author` | string | - | 作者名 |
| `version` | string | - | バージョン番号 |
| `description` | string | - | 作品の概要説明 |
| `scenes` | array | ✓ | シーンの配列 |
| `metadata` | object | - | 追加のメタ情報 |

`metadata`オブジェクトには、作品の総シーン数、推定再生時間（ミリ秒）、ジャンルタグ、対象年齢などを記載できます。これらの情報は、将来的にギャラリー機能や検索機能で活用される可能性があります。

---

## メディアファイルの準備

デジタルノベルシステムでは、画像、動画、音声の3種類のメディアファイルを使用します。これらのファイルは、プロジェクトの`client/public`ディレクトリ内に配置します。

### ディレクトリ構成

推奨されるディレクトリ構成は以下の通りです。

```
client/public/
├── images/              # 背景画像
│   ├── scene1.jpg
│   ├── scene2.jpg
│   └── ...
├── videos/              # 動画ファイル
│   ├── opening.mp4
│   └── ...
└── audio/
    ├── bgm/             # 背景音楽
    │   ├── theme.mp3
    │   └── ...
    ├── voice/           # ボイス
    │   ├── scene1.mp3
    │   └── ...
    └── se/              # 効果音
        ├── door.mp3
        └── ...
```

### 画像ファイル

背景画像には、JPEGまたはPNG形式を使用します。推奨される仕様は以下の通りです。

| 項目 | 推奨値 |
|------|--------|
| 解像度 | 1920×1080 以上 |
| アスペクト比 | 16:9 |
| ファイル形式 | JPEG（写真的な画像）、PNG（イラスト） |
| ファイルサイズ | 500KB以下（読み込み速度のため） |

画像は自動的に画面サイズに合わせてリサイズされますが、高解像度の画像を用意することで、大画面でも美しく表示されます。

### 動画ファイル

動画シーンを使用する場合は、MP4形式（H.264コーデック）を推奨します。

| 項目 | 推奨値 |
|------|--------|
| 解像度 | 1920×1080 |
| フレームレート | 30fps |
| ファイル形式 | MP4（H.264） |
| ビットレート | 5Mbps以下 |

動画ファイルは画像よりもファイルサイズが大きくなるため、読み込み時間を考慮して適切に圧縮してください。

### 音声ファイル

音声ファイルには、MP3形式を推奨します。BGM、ボイス、効果音の3種類があります。

| 種類 | 推奨仕様 | 説明 |
|------|----------|------|
| BGM | 128kbps、ループ対応 | 背景音楽。シーン全体で再生される |
| ボイス | 128kbps | キャラクターのセリフ音声 |
| 効果音 | 96kbps、短時間 | ドアの音、足音などの効果音 |

音声ファイルは、シーンの`duration`（表示時間）と連動します。ボイスの長さに合わせて`duration`を設定することで、自然な進行が実現できます。

---

## シーンの作成

各シーンは、`scenes`配列内のオブジェクトとして定義します。シーンには、表示するメディア、音声、字幕、トランジション効果などの情報を含めます。

### シーンの基本構造

シーンオブジェクトの基本構造は以下の通りです。

```json
{
  "id": 1,
  "type": "image",
  "source": "/images/scene1.jpg",
  "duration": 5000,
  "audio": {
    "voice": "/audio/voice/scene1.mp3",
    "bgm": "/audio/bgm/theme.mp3",
    "se": "/audio/se/door.mp3"
  },
  "subtitles": [
    {
      "speaker": "ナレーター",
      "text": "これは、ある小さな町で起きた物語です。",
      "start": 0,
      "end": 3000
    }
  ],
  "transitions": {
    "nextSceneId": 2,
    "effect": "fade"
  }
}
```

### シーンフィールドの詳細

各フィールドの意味と使用方法を説明します。

| フィールド | 型 | 必須 | 説明 |
|------------|-----|------|------|
| `id` | number | ✓ | シーンの一意な識別番号（1から連番） |
| `type` | string | ✓ | メディアタイプ（`"image"` または `"video"`） |
| `source` | string | ✓ | メディアファイルのパス |
| `duration` | number | ✓ | 自動再生モード時の表示時間（ミリ秒） |
| `audio` | object | ✓ | 音声ファイルの設定 |
| `subtitles` | array | ✓ | 字幕の配列 |
| `transitions` | object | ✓ | 次のシーンへの遷移設定 |

#### type（メディアタイプ）

`type`フィールドには、`"image"`（静止画）または`"video"`（動画）を指定します。静止画の場合は`duration`で指定した時間表示され、動画の場合は動画の長さに応じて自動的に進行します。

#### source（メディアパス）

`source`フィールドには、メディアファイルのパスを指定します。パスは`/`から始まる絶対パスで記述し、`client/public`ディレクトリからの相対パスとなります。

例えば、`client/public/images/scene1.jpg`に配置したファイルは、`"/images/scene1.jpg"`と記述します。

#### duration（表示時間）

`duration`フィールドには、自動再生モード時のシーン表示時間をミリ秒単位で指定します。例えば、5秒間表示する場合は`5000`と記述します。

手動進行モードでは、この値は無視され、ユーザーがクリックするまでシーンが表示され続けます。

---

## 字幕の設定

字幕は、音声に同期してテキストを表示する機能です。各シーンには複数の字幕を設定でき、それぞれに表示開始時刻と終了時刻を指定します。

### 字幕オブジェクトの構造

字幕は、`subtitles`配列内のオブジェクトとして定義します。

```json
{
  "speaker": "キャラクター名",
  "text": "表示するテキスト",
  "start": 0,
  "end": 3000
}
```

### 字幕フィールドの詳細

| フィールド | 型 | 必須 | 説明 |
|------------|-----|------|------|
| `speaker` | string | ✓ | 話者名（キャラクター名、ナレーターなど） |
| `text` | string | ✓ | 表示する字幕テキスト |
| `start` | number | ✓ | 表示開始時刻（ミリ秒、シーン開始からの経過時間） |
| `end` | number | ✓ | 表示終了時刻（ミリ秒、シーン開始からの経過時間） |

### 字幕のタイミング設定

字幕のタイミングは、シーンが開始してからの経過時間（ミリ秒）で指定します。例えば、シーン開始直後から3秒間表示する場合は、`"start": 0, "end": 3000`と記述します。

複数の字幕を連続して表示する場合は、以下のように記述します。

```json
"subtitles": [
  {
    "speaker": "ナレーター",
    "text": "これは、ある小さな町で起きた物語です。",
    "start": 0,
    "end": 3000
  },
  {
    "speaker": "ナレーター",
    "text": "静かな朝、主人公は目を覚ましました。",
    "start": 3500,
    "end": 6000
  }
]
```

この例では、最初の字幕が0〜3秒、2番目の字幕が3.5〜6秒に表示されます。字幕と字幕の間に0.5秒の間隔を設けることで、読みやすさが向上します。

### 字幕の長さの目安

字幕の表示時間は、テキストの長さに応じて調整します。一般的な目安は以下の通りです。

| テキスト長 | 推奨表示時間 |
|------------|--------------|
| 短文（10文字以下） | 2〜3秒 |
| 中文（20文字程度） | 3〜4秒 |
| 長文（30文字以上） | 4〜6秒 |

読者が快適に読めるよう、十分な表示時間を確保してください。

---

## 音声の配置

音声は、BGM（背景音楽）、ボイス（キャラクターのセリフ）、SE（効果音）の3種類を同時に再生できます。これらは`audio`オブジェクト内で指定します。

### 音声オブジェクトの構造

```json
"audio": {
  "voice": "/audio/voice/scene1.mp3",
  "bgm": "/audio/bgm/theme.mp3",
  "se": "/audio/se/door.mp3"
}
```

### 音声フィールドの詳細

| フィールド | 型 | 必須 | 説明 |
|------------|-----|------|------|
| `voice` | string | - | ボイスファイルのパス |
| `bgm` | string | - | BGMファイルのパス |
| `se` | string | - | 効果音ファイルのパス |

すべてのフィールドは任意です。使用しない音声は省略できます。

### BGMの継続再生

BGMは、同じファイルが指定されている限り、シーンをまたいで継続して再生されます。BGMを変更したい場合は、新しいシーンで異なるBGMファイルを指定します。

例えば、シーン1〜3で同じBGMを使用し、シーン4で別のBGMに切り替える場合は、以下のように記述します。

```json
// シーン1〜3
"audio": {
  "bgm": "/audio/bgm/theme1.mp3"
}

// シーン4
"audio": {
  "bgm": "/audio/bgm/theme2.mp3"
}
```

### ボイスと字幕の同期

ボイスファイルの長さと字幕の表示時間を一致させることで、自然な同期が実現できます。ボイスの長さに合わせて`duration`と字幕の`end`を設定してください。

例えば、5秒間のボイスファイルを使用する場合は、以下のように設定します。

```json
{
  "duration": 5000,
  "audio": {
    "voice": "/audio/voice/scene1.mp3"
  },
  "subtitles": [
    {
      "speaker": "主人公",
      "text": "おはよう。今日もいい天気だね。",
      "start": 0,
      "end": 5000
    }
  ]
}
```

---

## トランジション効果

トランジション効果は、シーンからシーンへの切り替え時の演出です。`transitions`オブジェクトで設定します。

### トランジションオブジェクトの構造

```json
"transitions": {
  "nextSceneId": 2,
  "effect": "fade"
}
```

### トランジションフィールドの詳細

| フィールド | 型 | 必須 | 説明 |
|------------|-----|------|------|
| `nextSceneId` | number or null | ✓ | 次のシーンのID（最終シーンの場合は`null`） |
| `effect` | string | - | トランジション効果の種類 |

### トランジション効果の種類

現在サポートされているトランジション効果は以下の通りです。

| 効果名 | 説明 |
|--------|------|
| `"fade"` | フェードイン/フェードアウト |
| `"slide"` | スライド遷移 |
| `"none"` | 効果なし（即座に切り替え） |

省略した場合は、デフォルトで`"fade"`が適用されます。

### 最終シーンの設定

ストーリーの最終シーンでは、`nextSceneId`を`null`に設定します。これにより、システムはストーリーが終了したことを認識し、適切な処理を行います。

```json
"transitions": {
  "nextSceneId": null,
  "effect": "fade"
}
```

---

## ベストプラクティス

効果的なデジタルノベルコンテンツを制作するためのベストプラクティスを紹介します。

### シーン構成

物語の流れを意識してシーンを構成することが重要です。一般的なシーン構成のパターンは以下の通りです。

**導入シーン**では、世界観や状況を説明します。ナレーションを使用して、視聴者を物語に引き込みます。背景画像は、舞台となる場所の全景を使用すると効果的です。

**展開シーン**では、キャラクター同士の会話や出来事を描写します。キャラクターの立ち絵や表情の変化を表現できる画像を使用します。ボイスと字幕を活用して、臨場感を演出します。

**クライマックスシーン**では、物語の山場を描きます。動画を使用したり、効果音を多用することで、迫力のある演出が可能です。

**結末シーン**では、物語を締めくくります。余韻を残すために、静かなBGMとゆっくりとしたフェードアウトを使用すると効果的です。

### 音声と字幕のバランス

音声と字幕は、相互に補完し合う関係にあります。ボイスがある場合でも、字幕を表示することで、聴覚に障害のある方や音声をオフにしている方にも内容が伝わります。

字幕のテキストは、ボイスの内容と完全に一致させる必要はありません。ボイスで感情表現を行い、字幕では要点を簡潔に伝えるという使い分けも可能です。

### ファイルサイズの最適化

Webアプリケーションでは、ファイルサイズが読み込み速度に直結します。画像は適切に圧縮し、音声はビットレートを調整することで、快適な視聴体験を提供できます。

特に、モバイル環境では通信速度が遅い場合があるため、ファイルサイズの最適化は重要です。画像は500KB以下、音声は1MB以下を目安にしてください。

### テストプレイの実施

コンテンツを公開する前に、必ずテストプレイを実施してください。以下の点を確認します。

- すべてのシーンが正しく表示されるか
- 字幕のタイミングが適切か
- 音声が正しく再生されるか
- トランジション効果が自然か
- 自動再生モードと手動進行モードの両方で問題がないか

複数のデバイス（PC、タブレット、スマートフォン）でテストすることを推奨します。

---

## トラブルシューティング

コンテンツ制作中によくある問題と解決方法を紹介します。

### 画像が表示されない

**原因**: ファイルパスが間違っている、またはファイルが存在しない。

**解決方法**: `source`フィールドのパスが正しいか確認してください。パスは`/`から始まる絶対パスで、`client/public`ディレクトリからの相対パスとなります。ファイル名の大文字・小文字も区別されます。

### 字幕が表示されない

**原因**: `start`と`end`のタイミングが現在時刻と一致していない。

**解決方法**: 字幕の`start`と`end`は、シーン開始からの経過時間（ミリ秒）です。`duration`の範囲内に収まっているか確認してください。また、`start`が`end`より小さい値になっているか確認してください。

### 音声が再生されない

**原因**: ブラウザの自動再生ポリシーにより、音声が再生されない場合があります。

**解決方法**: 多くのブラウザでは、ユーザーの操作（クリックなど）がないと音声を再生できません。最初のシーンを表示する前に、スタートボタンを表示してユーザーにクリックしてもらうことで、この問題を回避できます。

### シーンが進まない

**原因**: `nextSceneId`が正しく設定されていない、または存在しないシーンIDが指定されている。

**解決方法**: `transitions.nextSceneId`に指定したIDのシーンが`scenes`配列内に存在するか確認してください。最終シーンの場合は、`nextSceneId`を`null`に設定します。

### JSONの構文エラー

**原因**: JSONの記述に誤りがある（カンマの位置、括弧の対応など）。

**解決方法**: JSONの構文チェッカーを使用して、エラーがないか確認してください。多くのテキストエディタには、JSON検証機能が組み込まれています。

---

## まとめ

本マニュアルでは、デジタルノベルシステムのコンテンツ作成方法について解説しました。シナリオデータの構造、メディアファイルの準備、シーンの作成、字幕と音声の設定、トランジション効果の使用方法を理解することで、魅力的なデジタルノベル作品を制作できます。

コンテンツ制作は、技術的な知識だけでなく、物語を伝える表現力も求められます。本マニュアルで紹介したベストプラクティスを参考にしながら、独自の演出方法を探求してください。

ご不明な点がある場合は、技術仕様書やサンプルシナリオを参照するか、開発チームにお問い合わせください。

---

**著者について**

本マニュアルは、Manus AIによって作成されました。デジタルノベルシステムの開発と並行して、コンテンツクリエイターの皆様が効率的に作品を制作できるよう、このガイドを執筆しました。
